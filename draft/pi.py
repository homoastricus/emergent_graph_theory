import numpy as np
import matplotlib.pyplot as plt


def correct_interpretation():
    """
    Корректная интерпретация ваших данных об эмерджентной геометрии
    """

    data_points = [
        (5000, 30, 0.05, 5.50, 2.0000, 36.34),
        (5000, 24, 0.05, 5.18, 2.0000, 36.34),
        (5000, 20, 0.05, 4.49, 2.1331, 32.10),
        (5000, 15, 0.05, 4.25, 2.2924, 27.03),
        (5000, 6, 0.05, 4.47, 2.1459, 31.69),
        (5000, 4, 0.05, 4.67, 2.0210, 35.67),
        (5000, 3, 0.05, 1.17, 2.8324, 9.84),  # ЕДИНСТВЕННЫЙ случай близкий к 3D!
        (10000, 4, 0.05, 4.34, 2.2482, 28.44),
        (10000, 8, 0.05, 5.26, 2.0000, 36.34),
        (10000, 16, 0.05, 4.54, 2.1173, 32.61),
        (10000, 30, 0.05, 5.80, 2.0000, 36.34),
        (20000, 4, 0.05, 4.70, 2.0280, 35.45)
    ]

    print("ФИЗИЧЕСКИ КОРРЕКТНАЯ ИНТЕРПРЕТАЦИЯ:")
    print("=" * 90)
    print("Эффективная размерность d из ваших вычислений - это ФРАКТАЛЬНАЯ РАЗМЕРНОСТЬ")
    print("Она не соответствует топологической размерности пространства!")
    print("=" * 90)
    print()

    # Анализ что на самом деле показывают данные
    print("КЛЮЧЕВЫЕ ВЫВОДЫ:")
    print("1. При d > 3.5 эмерджентное π → 2.0-2.3")
    print("   Это означает: геометрия НЕЕВКЛИДОВА, пространство ФРАКТАЛЬНОЕ")
    print()
    print("2. ЕДИНСТВЕННЫЙ случай d ≈ 1.17 дает π ≈ 2.83 (отклонение 9.84%)")
    print("   Это ближе всего к 3D геометрии, но все равно далеко от π = 3.14159")
    print()
    print("3. Ваши симуляции показывают:")
    print("   - При данных параметрах (p=0.05) НЕ ВОЗНИКАЕТ 3D Евклидова геометрия")
    print("   - Эмерджентная геометрия всегда фрактальна с d > 3")
    print("   - Для получения π ≈ 3.14 нужны ДРУГИЕ параметры сети")

    # Визуализация тренда
    dimensions = [d for _, _, _, d, _, _ in data_points]
    pi_values = [pi for _, _, _, _, pi, _ in data_points]

    plt.figure(figsize=(10, 6))
    plt.scatter(dimensions, pi_values, s=100, alpha=0.7, c='red')
    plt.axhline(y=np.pi, color='green', linestyle='--', linewidth=2,
                label=f'Евклидово π = {np.pi:.5f}')
    plt.axhline(y=2.0, color='blue', linestyle=':', linewidth=2,
                label='Фрактальное π ≈ 2.0')
    plt.xlabel('Фрактальная размерность d')
    plt.ylabel('Эмерджентное π')
    plt.title(
        'Ваши данные: эмерджентная геометрия ВСЕГДА фрактальна\nпри p=0.05 не возникает 3D Евклидового пространства')
    plt.legend()
    plt.grid(True, alpha=0.3)
    plt.show()

    return data_points


def what_parameters_would_give_pi():
    """
    Какие параметры могут дать π ≈ 3.14?
    """
    print("\n" + "=" * 70)
    print("КАКИЕ ПАРАМЕТРЫ ДОЛЖНЫ БЫТЬ ДЛЯ π ≈ 3.14159?")
    print("=" * 70)
    print()
    print("Исходя из ваших данных и физических соображений:")
    print()
    print("1. Топологическая размерность должна быть ≈ 3.0")
    print("   (у вас все d > 3.5 - это фрактальные пространства)")
    print()
    print("2. Параметр p должен быть другим:")
    print("   - p ≈ 0.01-0.03 для более регулярных структур")
    print("   - p ≈ 0.001 для почти идеальных решеток")
    print("   - p=0.05 создает СЛИШКОМ много случайных связей")
    print()
    print("3. K должно быть меньше:")
    print("   - K=4-6 для 3D-подобных структур")
    print("   - K=30 создает высокоразмерные фракталы")
    print()
    print("РЕКОМЕНДУЕМЫЕ ПАРАМЕТРЫ ДЛЯ ЭКСПЕРИМЕНТА:")
    print("N=10000, K=4, p=0.01  → ожидаем d ≈ 3.0, π ≈ 3.14")
    print("N=10000, K=6, p=0.02  → ожидаем d ≈ 3.1, π ≈ 3.14")


# Запуск корректного анализа
data = correct_interpretation()
what_parameters_would_give_pi()